<template>
    <div class="welcome">
        <h1 class="title"><span>SalHe â™¥ Letty</span></h1>
        <p class="slogan">
            <span class="quote-content"></span>
        </p>
        <div class="more">
            <i class="more-btn el-icon-bottom"></i>
        </div>
    </div>
</template>

<script>
    import TypeIt from "typeit";

    export default {
        name: "LoveTime",
        data() {
            return {
                unionTime: new Date('2019/07/25 20:29'), // å®˜å®£æ—¶é—´
            };
        },
        mounted() {
            this.showLoveDuration();
        },
        methods: {
            showLoveDuration() {
                let now = new Date();
                let total = (now - this.unionTime) / 1000;
                let day = Math.floor(total / (24 * 60 * 60));//è®¡ç®—æ•´æ•°å¤©æ•°
                let afterDay = total - day * 24 * 60 * 60;//å–å¾—ç®—å‡ºå¤©æ•°åå‰©ä½™çš„ç§’æ•°
                let hour = Math.floor(afterDay / (60 * 60));//è®¡ç®—æ•´æ•°å°æ—¶æ•°
                let afterHour = total - day * 24 * 60 * 60 - hour * 60 * 60;//å–å¾—ç®—å‡ºå°æ—¶æ•°åå‰©ä½™çš„ç§’æ•°
                let min = Math.floor(afterHour / 60);//è®¡ç®—æ•´æ•°åˆ†
                let sec = Math.floor(total - day * 24 * 60 * 60 - hour * 60 * 60 - min * 60);//å–å¾—ç®—å‡ºåˆ†åå‰©ä½™çš„ç§’æ•°

                function buildDuration(delta, unit) {
                    console.log(delta, unit)
                    if (delta > 0) return delta + unit;
                    return '';
                }

                let durationText = day + 'å¤©'
                // + buildDuration(hour, 'å°æ—¶')
                // + buildDuration(min, 'åˆ†é’Ÿ')
                // + buildDuration(sec, 'ç§’');

                let typeIt = new TypeIt('.quote-content', {
                    speed: 100,
                    waitUntilVisible: true,
                    afterComplete: async (step, instance) => {

                    }
                })
                    .type('æˆ‘ä¸Letty, ')
                    .break()
                    .type('å§‹äº 2019/07/25')
                    .break({delay: 500})
                    .type('è®©æˆ‘ç®—ç®—...')
                    .break({delay: 200})
                    .type('æœ‰å¤šä¹…äº†å‘¢...')
                    .break()
                    .break()
                    .pause(1500)
                    .type('å“¦~~')
                    .break()
                    .type(`<strong>${durationText}</strong>`);

                if (day === 365) {
                    typeIt.break()
                        .type('å“‡å“¦ï¼Œæ•´æ•´ä¸€å¹´äº†å”‰~');
                }

                typeIt.break({delay: 100})
                    .break({delay: 100})
                    .type('è¿™é‡Œåº”è¯¥æ˜¯æœ‰ğŸµéŸ³ä¹çš„å“¦~~')
                    .break({delay: 100})
                    .type('å¦‚æœæ²¡æœ‰å¬åˆ°çš„è¯ï¼Œç‚¹ä¸¤ä¸‹å±å¹•å­~~')
                    .go();
            }
        }
    }
</script>

<style lang="less" scoped>

    .more {
        display: flex;
        justify-content: center;
        width: 100%;
        position: absolute;
        bottom: 30px;
        animation: moreShake 1.5s ease infinite alternate;

        .more-btn {
            align-items: center;
            font-size: 30px;
        }
    }

    @keyframes moreShake {
        0%, to {
            transform: translateY(0);
            opacity: 0.4;
        }

        50% {
            transform: translateY(10px);
            opacity: 1;
        }
    }

    .welcome {
        height: 100vh;
        text-align: center;
        color: white;

        display: flex;
        flex-direction: column;
        justify-content: center;
        align-content: center;

        background: url(../assets/background/cola.jpg) no-repeat top center fixed;
        background-size: cover;

        .title {
            margin-bottom: 20px;

            span {
                padding: 10px 50px;
                background: rgba(158, 186, 197, .5);
                border-radius: 50px;
            }
        }

        .slogan {
            margin-bottom: 10px;
        }
    }

    @keyframes cursorFlash {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }
</style>